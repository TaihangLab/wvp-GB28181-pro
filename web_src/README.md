# 极星算法推理平台

> 一个基于Vue.js的可视化监控平台，用于展示算法推理系统的运行状态和数据统计。

## 项目概述

极星算法推理平台是一个大屏可视化系统，用于实时监控和展示AI算法推理引擎的各项性能指标、设备连接状态、报警事件等信息。该平台采用现代化设计风格，以蓝色科技感为主题，提供直观的数据可视化展示。

## 功能模块

### 资源统计
- 显示服务器节点信息（Master节点和普通节点）
- 展示CPU、内存、磁盘、GPU等资源使用情况
- 使用环形图直观展示使用率百分比

### 算法管理
- 展示已部署的算法总数和运行状态
- 使用气泡图展示不同类型的算法
- 提供算法调用次数、推理速度、准确率等关键指标

### 设备监控
- 统计接入设备总数及各类设备数量
- 支持摄像头、算法服务器、NVR存储设备等多种设备类型
- 显示设备在线状态和关键性能参数

### 视觉AI技能管理
- 展示所有可用的视觉AI技能，如人体检测、车辆检测、人脸识别等
- 提供技能状态管理（已发布/未发布）
- 支持按技能类型和名称搜索筛选
- 显示技能版本和关联设备数量
- 提供技能详情查看和删除功能

### 报警事件
- 实时展示报警事件和现场图像
- 提供报警事件统计分析
- 支持按时间、类型进行数据筛选
- 图表化展示报警趋势

### 实时监控
- 支持实时视频流展示
- 多画面同时显示
- 智能识别结果可视化

### 预警管理
- 实时展示预警信息和处理状态
- 提供预警处理、档案管理、数据导出等功能

## 技术架构

- 前端框架：Vue.js
- UI组件：Element UI
- 可视化图表：Chart.js、自定义组件
- 3D效果：Three.js
- 响应式设计：支持各种分辨率显示器

## 依赖说明

- **Chart.js**: 用于绘制报警趋势图和报警转发统计图
- **Element UI**: 提供基础UI组件
- **Three.js**: 用于中央3D数据可视化展示
- **Moment.js**: 用于时间格式化和处理
- **Echarts**: 提供复杂图表支持
- **Screenfull**: 实现全屏功能

## 项目结构

```
/
├── src/                    # 源代码目录
│   ├── components/         # 组件目录
│   │   ├── visionAI/       # 视觉AI相关组件
│   │   │   └── ivisualCenter/  # 可视化中心组件
│   │   │       └── algorithmInference.vue  # 算法推理平台主组件
│   │   ├── assets/             # 静态资源
│   │   ├── router/             # 路由配置
│   │   ├── store/              # Vuex状态管理
│   │   ├── App.vue             # 应用入口组件
│   │   └── main.js             # 应用入口JS
├── public/                 # 公共资源目录
├── static/                 # 静态资源目录
│   └── img/                # 图片资源
│   │   ├── traffic.jpg     # 交通监控图片
│   │   ├── traffic-1.jpg   # 小型监控画面1
│   │   ├── traffic-2.jpg   # 小型监控画面2
│   │   ├── traffic-3.jpg   # 小型监控画面3
│   │   └── central-3d.png  # 中央3D数据可视化图
├── config/                 # 项目配置
├── build/                  # 构建脚本
└── package.json            # 项目依赖
```

## 安装与运行

```bash
# 安装依赖
npm install

# 开发模式运行（热重载）
npm run dev

# 生产环境构建
npm run build
```

## 界面设计

该项目采用蓝色科技风格设计，包含以下设计元素：
- 深蓝色背景，营造科技感
- 渐变色边框和装饰线条
- 数据可视化图表（环形图、折线图、条形图等）
- 3D立体数据展示
- 实时数据流动效果
- 气泡效果算法展示

### 图表说明

- **资源使用率图表**: 使用CSS实现的环形进度图，展示CPU、内存、磁盘和GPU使用率
- **算法气泡图**: 使用动画效果展示各种算法，并带有浮动效果
- **报警趋势图**: 使用Chart.js实现的折线图，展示一个月内每天的报警数量趋势
- **报警类型统计**: 使用环形图展示不同类型报警的占比情况
- **报警转发统计**: 使用Chart.js实现的柱状图，展示不同月份的报警转发数量
- **设备类型统计**: 使用CSS实现的环形图，展示不同类型设备的数量

## 最近更新内容

### 界面重构
- 完全重新设计了UI界面，采用更专业的数据可视化风格
- 优化了布局结构，更合理地组织信息展示
- 调整了色彩方案，提高了视觉层次感和可读性
- 添加了中央3D数据可视化效果

### 功能增强
- 增加了更多数据统计维度
- 优化了报警信息展示方式
- 添加了设备总览和分类统计
- 改进了算法性能指标展示
- 集成了Chart.js提升图表展示效果
- 新增视觉AI技能管理模块，支持技能状态管理和搜索功能
- **新增预警详情页面违规描述字段**：在预警详情弹窗中增加了违规描述信息，提供更详细的违规行为说明和处理建议，提升预警信息的完整性和实用性，同时优化了信息展示布局，将违规类型调整为预警名称，新增预警类型分类，并改进了预警描述的文本对齐方式
- **预警管理功能重构**：根据产品需求重新设计了预警处理操作流程，包括：
  - 将原有的"处理"和"完结"按钮简化为"标记为已处理"功能，一键直接将预警状态改为已处理
  - 新增"添加备注"功能，支持录入处理意见、责任人和处置方式等详细信息
  - 优化"上报"功能，点击后弹窗显示"预警已上报"确认信息
  - **新增"误报"功能**：一键标记误报预警并自动归档到默认档案，误报预警从实时监控和管理页面消失，仅可在档案中查看
  - 新增"归档"功能，将预警从管理列表中正式移除并归入档案
  - 预警卡片中增加备注信息展示，方便查看历史处理记录
  - 批量处理功能调整为批量标记为已处理，提高操作效率
  - **按钮布局优化**：调整预警卡片底部按钮大小为mini尺寸，确保所有操作按钮能在一行内整齐排列，提升界面美观度和操作便利性
- **智能归档系统实现**：完整实现了基于摄像头位置的档案选择逻辑，包括：
  - 档案选择逻辑：当前位置有默认档案时自动选择，无默认档案时系统自动创建
  - 限制条件：用户只能选择当前摄像头位置的档案，不可跨摄像头归档
  - 自定义档案：支持用户创建新档案，可输入档案名称和描述信息
  - 状态管理：归档后预警状态变为"已归档"，从实时预警和管理页面移除
  - 档案关联：每个预警归档时记录归档时间和所属档案ID，便于后续查询
  - 用户体验：提供清晰的操作界面和状态提示，确保归档操作的准确性
- **位置区域筛选功能**：在预警管理页面左侧新增位置区域导航，实现按位置筛选预警信息：
  - 位置分类：支持全部位置、油气监控区域、作业区域、储罐区域、管道区域、管道接口等位置筛选
  - 实时计数：每个位置显示当前未归档预警的实时数量统计
  - 智能筛选：点击位置后自动筛选显示该位置的预警信息，提高查看效率
  - 状态管理：切换位置时自动清空已选择的预警项和筛选状态
  - 用户反馈：选择位置时提供成功提示信息，增强用户体验
  - 响应式设计：支持桌面端和移动端不同的显示方式，确保各种设备下的最佳展示效果
  - 现代UI设计：采用渐变色、圆角卡片、悬浮效果等现代设计元素，与整体页面风格保持一致
- **预警卡片布局优化**：调整预警信息卡片布局为一行显示5个卡片，提高信息展示密度和屏幕利用率：
  - 桌面端：一行显示5个预警卡片，充分利用宽屏显示空间
  - 中等屏幕：一行显示4个预警卡片，保持良好的视觉效果
  - 移动端：一行显示2个预警卡片，确保移动设备上的可读性
  - 响应式适配：根据不同屏幕尺寸自动调整卡片数量和间距
  - 比例优化：将卡片高度从320px调整为360px，图片区域从120px调整为140px，使卡片宽高比例更加协调美观
- **预警详情处理进展时间线重构**：将固定的处理状态流程改为动态的操作历史记录系统：
  - **动态操作记录**：不再使用固定的处理状态时间线，改为实时记录每一次对预警的操作
  - **完整操作历史**：记录所有操作类型，包括预警产生、处理记录、上报、归档、误报处理等
  - **多次操作支持**：允许用户多次点击不同的操作按钮，每次操作都会在时间线中添加新的记录
  - **多次处理记录**：处理按钮可重复点击，每次点击都会添加一条新的处理记录，而不是将预警标记为"已处理"状态
  - **操作员信息**：每条操作记录显示操作员信息，便于追溯责任人
  - **操作时间记录**：精确记录每次操作的执行时间，形成完整的操作时间轴
  - **操作类型标识**：使用不同颜色的左边框区分不同操作类型（创建-灰色、处理-绿色、上报-橙色、归档-红色、误报-灰色）
  - **操作描述详情**：每条记录包含详细的操作描述，如处理意见、归档位置、上报信息等
  - **状态持久化**：操作历史保存在预警对象中，重新打开详情页面时能完整加载历史记录
  - **用户体验优化**：操作后不自动关闭详情弹框，用户可继续查看更新后的时间线或进行其他操作
  - **视觉设计优化**：优化时间线样式，增加操作类型标识和操作员信息显示，提升可读性和美观度
  - **固定高度滚动**：处理进展框设置固定高度（470px），与左侧媒体内容底边对齐，多余的时间线记录通过滚动查看
  - **用户昵称显示**：操作员信息显示真实的用户登录昵称，而不是固定的"当前用户"文本，支持从localStorage保存和获取用户昵称
  - **时间线视觉优化**：最新的时间线项目（第一个）使用动态蓝色圆点突出显示，带有呼吸灯效果，其他历史项目使用灰色圆点，便于区分操作的新旧顺序
- **预警档案信息字段完善**：优化预警档案模块中添加预警功能，使其信息字段与预警详情页面完全匹配：
  - **新增预警类型字段**：增加安全违规、人员违规、消防违规、车辆违规、其他违规等类型选择（必填项）
  - **新增违规位置字段**：支持填写具体的违规发生位置（必填项）
  - **新增处理备注字段**：允许录入处理情况、整改措施等备注信息
  - **优化预警描述字段**：从简单的"备注描述"升级为详细的"预警描述"，支持更完整的违规行为描述
  - **新增预警时间字段**：增加时间选择器，支持精确到秒的预警发生时间记录，确保时间信息的准确性（必填项）
  - **新增违规截图上传**：支持上传违规现场截图，限制图片格式和大小（2MB以内），采用现代化拖拽上传UI设计
  - **新增视频片段上传**：支持上传违规行为视频片段，限制视频格式和大小（10MB以内），提供直观的视频预览界面
  - **数据结构统一**：确保添加的预警记录包含所有必要字段，与预警详情页面显示的信息完全对应
  - **模拟数据增强**：为历史档案数据补充完整的字段信息，包括预警类型、违规位置、处理备注等
  - **表单验证升级**：强化必填字段验证，包括预警名称、设备名称、预警等级、预警时间、预警类型、违规位置
  - **界面布局优化**：采用双列布局提高表单填写效率，增大弹框宽度至50%，提升用户体验
  - **UI设计改进**：重新设计文件上传组件，采用渐变背景、毛玻璃效果、悬浮动画等现代化视觉元素，提升用户交互体验
  - **图片预览功能优化**：修复预警图片预览功能，包括表格中小图片缩略图显示、点击预览大图功能、图片预览弹框样式优化，确保图片能正确加载和显示，提升用户查看预警图片的体验

### 交互优化
- 添加了日期选择器，支持时间范围筛选
- 优化了图表展示效果
- 增加了全屏显示功能
- 改进了实时事件展示和通知
- 添加了图表交互功能，支持鼠标悬停显示详细数据
- 优化了技能卡片布局，提升了视觉体验
- 增加了技能卡片悬浮效果和操作按钮

## 使用说明

1. 主界面展示各类数据统计和实时状态
2. 通过顶部导航可切换不同功能模块
3. 单击图表和数据卡片可查看详细信息
4. 右上角全屏按钮可切换全屏显示模式
5. 报警信息面板可通过日期按钮筛选不同时间段的数据
6. 实时事件面板显示最新的报警事件和图像
7. 在视觉AI技能管理页面，可以：
   - 使用顶部筛选器按状态和类型筛选技能
   - 使用搜索框搜索特定技能名称
   - 点击技能卡片上的"详情"按钮查看技能详细信息
   - 点击技能卡片上的"删除"按钮删除不需要的技能

## 后续计划

- [ ] 添加用户权限管理
- [ ] 优化移动端适配
- [ ] 增加更多自定义配置选项
- [ ] 支持更多类型的数据可视化图表
- [ ] 添加国际化支持
- [ ] 优化3D数据展示效果
- [ ] 增加更多交互功能

## 页面宽度优化

为了提供更好的全屏展示效果，系统进行了整体宽度优化，主要包含以下修改：

### 全宽布局优化
- 修改了主要容器元素，设置宽度为100%，确保页面内容充分利用屏幕空间
- 移除了页面元素的左右padding，消除两侧空白区域
- 调整了导航栏样式，确保导航栏横跨整个屏幕宽度

### 样式调整
- 添加了`overflow-x: hidden`属性防止水平滚动条出现
- 所有主要容器元素(el-container, el-header, el-main)均设置为宽度100%
- 调整了page-header样式，确保标题栏也能横跨整个屏幕

### 控制台页面优化
- 控制台页面各监控模块进行了布局调整，确保在全屏模式下正确显示
- 优化了row和col的间距，提供更紧凑的布局

### 实现效果
- 页面内容完全充满整个屏幕宽度
- 导航栏和内容区域不再有两侧留白
- 在各种分辨率下都能提供更好的视觉体验

# 太行AI云平台 - 预警管理系统

## 项目概述
这是一个基于Vue.js开发的智能预警管理系统，主要用于监控各类设备预警信息，提供实时预警处理、档案管理等功能。

## 功能特性

### 预警管理模块 (`warningManagement.vue`)

#### 最新更新 (2024-12-19)
**预警处理功能优化**：
- ✅ **处理按钮优化**：将原来的"处理"和"备注"按钮合并为一个"处理"按钮
- ✅ **处理流程优化**：点击处理按钮时，首先弹出处理意见对话框
- ✅ **批量处理优化**：批量处理时也需要填写统一的处理意见
- ✅ **用户体验提升**：处理意见为必填项，确保每个预警都有明确的处理记录
- ✅ **全页面统一**：预警详情页面和实时监控页面的处理按钮功能与预警管理页面保持一致
- ✅ **预警详情页面重构**：重新设计预警详情布局，增加处理进展时间线功能
  - **左右分栏布局**：左侧显示预警信息和媒体内容，右侧显示处理进展时间线
  - **处理进展时间线**：实时显示预警从产生到处理完成的全过程，包括时间、状态和描述信息
  - **完整流程展示**：显示完整的处理流程：预警产生 → 待处理 → 处理完成 → 归档处理
  - **动态状态展示**：蓝色活跃状态表示当前进行中的环节，绿色完成状态表示已完成环节，灰色表示未来步骤
  - **智能状态管理**：根据预警的实际处理状态动态显示相应的时间线节点和描述信息
  - **美观的视觉设计**：采用现代化的时间线设计，包含状态点、连接线、内容卡片等元素
  - **响应式适配**：支持不同屏幕尺寸的自适应布局

#### 核心功能
1. **预警展示**
   - 按位置区域分类显示预警信息
   - 支持按状态、等级、时间范围筛选
   - 卡片式布局，直观展示预警详情

2. **预警处理**
   - **单个处理**：点击"处理"按钮，填写处理意见后完成处理
   - **批量处理**：选择多个预警，填写统一处理意见后批量完成
   - **上报功能**：将重要预警上报给上级
   - **误报处理**：标记误报并自动归档
   - **手动归档**：选择档案进行归档

3. **档案管理**
   - 支持多档案管理
   - 自动创建默认档案
   - 归档预警不再在管理页面显示

4. **数据导出**
   - 支持CSV格式导出
   - 可选择性导出（选中项或全部筛选结果）

#### 处理流程说明

**全系统统一的预警处理流程**：
1. **预警管理页面**：在预警卡片上点击"处理"按钮
2. **预警详情页面**：在详情弹窗中点击"处理"按钮  
3. **实时监控页面**：在预警列表中点击"处理"按钮
4. 系统弹出"处理预警"对话框
5. 填写处理意见（必填，最多500字）
6. 点击"确认处理"完成
7. 预警状态自动更新为"已处理"，处理意见保存

**跨页面一致性**：
- 所有页面的处理按钮都使用相同的处理意见填写流程
- 处理完成后，预警状态和备注信息在所有页面同步更新
- 统一的用户交互体验，减少用户学习成本

#### 使用方法

**筛选预警**：
- 使用左侧位置区域快速筛选
- 使用顶部筛选条件精确筛选
- 点击"仅查看未处理事件"快速查看待处理预警

**处理预警**：
```
1. 找到需要处理的预警
2. 点击"处理"按钮
3. 在弹出的对话框中填写处理意见
4. 点击"确认处理"完成
```

**批量操作**：
```
1. 选择预警：使用复选框选择多个预警
2. 批量处理：点击"批量处理"按钮统一处理
3. 批量导出：点击"导出数据"按钮导出选中数据
```

#### 技术实现
- **前端框架**：Vue.js 2.x + Element UI
- **状态管理**：组件内部状态管理
- **数据交互**：模拟API调用（实际项目中需要连接后端接口）
- **文件导出**：前端生成CSV文件下载

#### 注意事项
1. 处理意见为必填项，确保预警处理的可追溯性
2. 已处理的预警无法再次处理，但可以查看处理意见
3. 归档的预警不在预警管理页面显示，需要在预警档案中查看
4. 批量处理将为所有选中预警应用相同的处理意见

## 目录结构
```
src/
├── components/
│   └── visionAI/
│       └── monitoringWarning/
│           ├── warningManagement.vue    # 预警管理主页面
│           └── warningDetail.vue        # 预警详情组件
```

## 开发环境
- Node.js 16+
- Vue CLI 4+
- Element UI 2.x

## 更新日志
- **2024-12-19**: 优化预警处理流程，合并处理和备注功能，增加批量处理意见填写
- **2024-12-XX**: 基础预警管理功能开发完成

# 技能管理模块功能说明

## 项目概述
这是一个基于Vue.js的多模态AI技能管理系统，主要用于管理和查看各种AI技能的详细信息。

## 主要功能

### 1. 技能列表查看 (multimodalReview.vue)
- **功能描述**: 展示所有AI技能的卡片式列表，支持搜索、筛选和批量操作
- **主要特性**:
  - 技能卡片网格展示
  - 支持按状态和分类筛选
  - 支持技能名称搜索
  - 批量选择和删除功能
  - 技能状态切换（上线/下线）
  - 分页展示

- **交互方式**:
  - 点击技能卡片：跳转到技能详情页面
  - 点击编辑按钮：跳转到编辑模式
  - 悬浮显示完整描述信息
  - 技能ID复制功能

### 2. 技能详情/创建/编辑 (multimodalCreate.vue)
- **功能描述**: 支持三种模式的技能管理页面
  - 创建模式：新建技能
  - 查看模式：显示技能详情（只读）
  - 编辑模式：修改现有技能

- **主要特性**:
  - 技能基本信息管理（名称、分类、描述）
  - 多分类支持，最多可选择3个分类
  - 图片上传和效果验证
  - AI分析功能集成
  - 根据模式动态调整界面状态

## 使用方法

### 查看技能详情
1. 在技能列表页面，直接点击任意技能卡片
2. 系统会自动跳转到详情页面，以只读模式显示技能信息
3. 在详情页面可以：
   - 查看技能的完整信息
   - 点击"编辑"按钮切换到编辑模式
   - 切换技能的上线/下线状态

### 编辑技能
1. 在技能列表页面，点击技能卡片上的"编辑"按钮
2. 或在详情页面点击"编辑"按钮
3. 在编辑模式下可以修改技能的各项参数：
   - 技能名称（最多30字符）
   - 技能分类（支持多选）
   - 技能描述（最多1000字符）
4. 编辑完成后可以选择：
   - **保存**：仅保存修改，保持原状态
   - **保存并上线**：保存修改并将技能设为上线状态
   - **取消编辑**：放弃修改，返回查看模式

### 创建新技能
1. 在技能列表页面点击"创建技能"按钮
2. 填写技能基本信息
3. 上传验证图片进行效果测试
4. 保存或发布技能

## 技术实现

### 路由参数传递
- 使用Vue Router的query参数传递技能ID和模式信息
- 格式：`/skillManage/multimodalCreate?id=技能ID&mode=模式`
- 模式包括：create（创建）、view（查看）、edit（编辑）

### 状态管理
- 根据路由参数动态设置页面模式
- 通过computed属性控制界面元素的显示和禁用状态
- 模拟数据存储，实际使用时可替换为API调用

### 用户体验优化
- 点击事件的合理处理，避免事件冲突
- 卡片悬浮效果和点击反馈
- 表单验证和错误提示
- 响应式布局支持

## 文件结构

```
src/components/visionAI/skillManagement/
├── multimodalReview.vue    # 技能列表页面
└── multimodalCreate.vue    # 技能详情/创建/编辑页面
```

## 开发说明

### 数据模型
```javascript
// 技能数据结构
{
  id: String,           // 唯一标识
  name: String,         // 技能名称
  description: String,  // 技能描述
  status: String,       // 状态：'online' | 'offline'
  categories: Array     // 分类数组
}
```

### 扩展功能
- 可以轻松添加更多技能分类
- 支持自定义上传文件类型
- 可集成真实的AI分析API
- 支持更复杂的权限控制

## 注意事项
1. 当前使用模拟数据，生产环境需要替换为真实API
2. 文件上传功能需要配置正确的服务器端点
3. 建议添加更详细的错误处理和用户提示
4. 可以根据实际需求调整UI样式和交互逻辑
